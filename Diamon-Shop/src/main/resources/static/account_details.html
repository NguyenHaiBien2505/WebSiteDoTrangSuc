<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Twitter Bootstrap shopping cart</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<!-- Bootstrap styles -->
<link href="assets/css/bootstrap.css" rel="stylesheet" />
<!-- Customize styles -->
<link href="assets/style.css" rel="stylesheet" />
<!-- font awesome styles -->
<link href="assets/font-awesome/css/font-awesome.css" rel="stylesheet">
<!--[if IE 7]>
			<link href="css/font-awesome-ie7.min.css" rel="stylesheet">
		<![endif]-->

<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->

<!-- Favicons -->
<link rel="shortcut icon" href="assets/ico/favicon.ico">

<style>
.employee-info {
	display: flex;
	flex-direction: row;
	align-items: center;
	padding: 60px;
	border: 1px solid #ccc;
	justify-content: space-between;
	gap: 30px;
	/* Giãn đều các phần tử */
}

.employee-info .avatar {
	flex: 1;
	/* Chiếm 1/3 container */
	max-width: 33%;
	/* Hạn chế tối đa là 1/3 chiều rộng */
}

.employee-info .avatar img {
	margin-top: -50%;
	border-radius: 8px;
	object-fit: cover;
}

.employee-info .info {
	flex: 2;
	/* Chiếm 2/3 còn lại của container */
	padding: 0 20px;
}

.employee-info label {
	font-weight: bold;
	color: #333;
	margin-bottom: 6px;
	display: block;
}

.employee-info input, select {
	padding: 10px;
	border: 1px solid #ccc;
	border-radius: 5px;
	background-color: #fff;
	width: 70%;
	height: 40px;
	box-sizing: border-box;
	margin-bottom: 6px;
}

.employee-info .actions {
	display: flex;
	gap: 10px;
	margin-top: 20px;
}

.employee-info button {
	padding: 10px 20px;
	background-color: #4CAF50;
	color: white;
	border: none;
	border-radius: 5px;
	cursor: pointer;
	transition: background-color 0.3s;
	font-size: 20px;
	font-weight: bold;
	margin-right: 100px;
}

button:hover {
	background-color: #45a049;
}

.readonly-select {
	pointer-events: none;
	background-color: #e9ecef;
	opacity: 1;
}
</style>
</head>
<body>
	<!-- 
	Upper Header Section 
-->
	<div class="navbar navbar-inverse navbar-fixed-top">
		<div class="topNav">
			<div class="container">
				<div class="alignR">
					<div class="pull-left socialNw">
						<a href="#"><span class="icon-twitter"></span></a> <a href="#"><span
							class="icon-facebook"></span></a> <a href="#"><span
							class="icon-youtube"></span></a> <a href="#"><span
							class="icon-tumblr"></span></a>
					</div>
					<a class="active" href="index.html"> <span class="icon-home"></span>
						Home
					</a> <a href="#"><span class="icon-user"></span> My Account</a> <a
						href="register.html"><span class="icon-edit"></span> Free
						Register </a> <a href="contact.html"><span class="icon-envelope"></span>
						Contact us</a> <a href="cart.html"><span
						class="icon-shopping-cart"></span> 2 Item(s) - <span
						class="badge badge-warning"> $448.42</span></a>
				</div>
			</div>
		</div>
	</div>

	<!--
Lower Header Section 
-->
	<div class="container">
		<div id="gototop"></div>
		<header id="header">
			<div class="row">
				<div class="span4">
					<h1>
						<a class="logo" href="index.html"><span>Twitter
								Bootstrap ecommerce template</span> <img
							src="assets/img/logo-bootstrap-shoping-cart.png"
							alt="bootstrap sexy shop"> </a>
					</h1>
				</div>
				<div class="span4">
					<div class="offerNoteWrapper">
						<h1 class="dotmark">
							<i class="icon-cut"></i> Twitter Bootstrap shopping cart HTML
							template is available @ $14
						</h1>
					</div>
				</div>
				<div class="span4 alignR">
					<p>
						<br> <strong> Support (24/7) : 0800 1234 678 </strong><br>
						<br>
					</p>
					<span class="btn btn-mini">[ 2 ] <span
						class="icon-shopping-cart"></span></span> <span
						class="btn btn-warning btn-mini">$</span> <span
						class="btn btn-mini">&pound;</span> <span class="btn btn-mini">&euro;</span>
				</div>
			</div>
		</header>

		<!--
Navigation Bar Section 
-->
		<div class="navbar">
			<div class="navbar-inner">
				<div class="container">
					<a data-target=".nav-collapse" data-toggle="collapse"
						class="btn btn-navbar"> <span class="icon-bar"></span> <span
						class="icon-bar"></span> <span class="icon-bar"></span>
					</a>
					<div class="nav-collapse">
						<ul class="nav">
							<li class="active"><a href="index.html">Home </a></li>
							<li><a href="list-view.html">List View</a></li>
							<li><a href="grid-view.html">Grid View</a></li>
							<li><a href="three-col.html">Three Column</a></li>
							<li><a href="four-col.html">Four Column</a></li>
							<li><a href="general.html">General Content</a></li>
						</ul>
						<form action="#" class="navbar-search pull-left">
							<input type="text" placeholder="Search"
								class="search-query span2">
						</form>
						<ul class="nav pull-right">
							<li class="dropdown"><a data-toggle="dropdown"
								class="dropdown-toggle" href="#"> <span class="icon-user"></span>
									Account
							</a>
								<ul class="dropdown-menu" aria-labelledby="navbarDropdown">
									<li><a class="dropdown-item" href="account_details.html">My
											profile</a></li>
									<li><a class="dropdown-item" href="forget_password.html">Change
											password</a></li>
									<li><hr class="dropdown-divider"></li>
									<li><a class="dropdown-item" role="button" id="logout">Logout</a></li>
								</ul></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<!-- Body Section -->
		<div class="row">
			<div class="content">
				<div class="page-header">
					<div class="page-title">
						<h4>Thông tin tài khoản</h4>
					</div>
				</div>
				<div class="employee-info">
					<div class="avatar">
						<img style="height: auto; width: 100%;"
							src="assets/img/profile4.jpg" alt="product">
					</div>
					<div class="info">
						<label for="employee-id">ID nhân viên:</label> <input
							style="background-color: #F1F0E8;" type="text" id="employee-id"
							value="12345" readonly> <label for="name">Tên đầy
							đủ:</label> <input type="text" id="name" value="Nguyễn Văn A"> <label
							for="email">Email:</label> <input type="email" id="email"
							value="nguyenvan@example.com"> <label for="phone">Số
							điện thoại:</label> <input type="text" id="phone" value="0123456789">

						<label for="role">Vai trò:</label> <select
							class="select readonly-select" id="role">
							<option value="KHACHHANG">Khách hàng</option>
							<option value="NHANVIEN">Nhân viên</option>
							<option value="QUANLY">Quản lý</option>
							<option value="QUANTRI">Quản trị</option>
						</select> <label for="created-date">Ngày tạo tài khoản:</label> <input
							style="background-color: #F1F0E8;" type="text" id="created-date"
							value="01/01/2023" readonly> <label for="last-updated">Cập
							nhật lần cuối:</label> <input style="background-color: #F1F0E8;"
							type="text" id="last-updated" value="01/01/2023" readonly>

						<div class="actions">
							<button id="update">Cập nhật</button>
						</div>
					</div>

				</div>

			</div>
		</div>

		<!-- Clients -->
		<section class="our_client">
			<hr class="soften" />
			<h4 class="title cntr">
				<span class="text">Manufactures</span>
			</h4>
			<hr class="soften" />
			<div class="row">
				<div class="span2">
					<a href="#"><img alt="" src="assets/img/1.png"></a>
				</div>
				<div class="span2">
					<a href="#"><img alt="" src="assets/img/2.png"></a>
				</div>
				<div class="span2">
					<a href="#"><img alt="" src="assets/img/3.png"></a>
				</div>
				<div class="span2">
					<a href="#"><img alt="" src="assets/img/4.png"></a>
				</div>
				<div class="span2">
					<a href="#"><img alt="" src="assets/img/5.png"></a>
				</div>
				<div class="span2">
					<a href="#"><img alt="" src="assets/img/6.png"></a>
				</div>
			</div>
		</section>

		<!-- Footer -->
		<footer class="footer">
			<div class="row-fluid">
				<div class="span2">
					<h5>Your Account</h5>
					<a href="#">YOUR ACCOUNT</a><br> <a href="#">PERSONAL
						INFORMATION</a><br> <a href="#">ADDRESSES</a><br> <a
						href="#">DISCOUNT</a><br> <a href="#">ORDER HISTORY</a><br>
				</div>
				<div class="span2">
					<h5>Iinformation</h5>
					<a href="contact.html">CONTACT</a><br> <a href="#">SITEMAP</a><br>
					<a href="#">LEGAL NOTICE</a><br> <a href="#">TERMS AND
						CONDITIONS</a><br> <a href="#">ABOUT US</a><br>
				</div>
				<div class="span2">
					<h5>Our Offer</h5>
					<a href="#">NEW PRODUCTS</a> <br> <a href="#">TOP SELLERS</a><br>
					<a href="#">SPECIALS</a><br> <a href="#">MANUFACTURERS</a><br>
					<a href="#">SUPPLIERS</a> <br />
				</div>
				<div class="span6">
					<h5>The standard chunk of Lorem</h5>
					The standard chunk of Lorem Ipsum used since the 1500s is
					reproduced below for those interested. Sections 1.10.32 and 1.10.33
					from "de Finibus Bonorum et Malorum" by Cicero are also reproduced
					in their exact original form, accompanied by English versions from
					the 1914 translation by H. Rackham.
				</div>
			</div>
		</footer>
	</div>
	<!-- /container -->

	<div class="copyright">
		<div class="container">
			<p class="pull-right">
				<a href="#"><img src="assets/img/maestro.png" alt="payment"></a>
				<a href="#"><img src="assets/img/mc.png" alt="payment"></a> <a
					href="#"><img src="assets/img/pp.png" alt="payment"></a> <a
					href="#"><img src="assets/img/visa.png" alt="payment"></a> <a
					href="#"><img src="assets/img/disc.png" alt="payment"></a>
			</p>
			<span>Copyright &copy; 2013<br> bootstrap ecommerce
				shopping template
			</span>
		</div>
	</div>
	<a href="#" class="gotop"><i class="icon-double-angle-up"></i></a>
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="assets/js/jquery.js"></script>
	<script src="assets/js/bootstrap.min.js"></script>
	<script src="assets/js/jquery.easing-1.3.min.js"></script>
	<script src="assets/js/jquery.scrollTo-1.4.3.1-min.js"></script>
	<script src="assets/js/shop.js"></script>
	<script src="assets/js/common.js"></script>
	<script>
		$(document).ready(function() {
			// Lấy ID từ URL
			const urlParams = new URLSearchParams(window.location.search);
			const employeeId = urlParams.get('id');

			// Gọi API chi tiết nhân viên
			if (employeeId) {
				$.ajax({
					url : '/admin/management/accounts/' + employeeId,
					type : 'GET',
					success : function(data) {
						$("#name").val(data.fullName);
						$("#employee-id").val(data.userId);
						$("#email").val(data.email);
						$("#phone").val(data.phone);
						$("#role").val(data.role);
						$("#created-date").val(data.createdAt);
						$("#last-updated").val(data.updatedAt);

					},
					error : function(xhr) {
						if (xhr.status === 401 || xhr.status === 403) {
							window.location.href = xhr.responseText;
						} else if (xhr.status === 400) {
							alert(xhr.responseText);
						}
					}
				});
				$("#update").on("click", function() {
					// Lấy dữ liệu từ các trường
					let data = {
						fullName : $('#name').val(),
						phone : $('#phone').val(),
						email : $('#email').val(),
						role : $('#role').val()
					};
					// Gửi AJAX
					$.ajax({
						url : '/admin/management/update/' + employeeId, // Đường dẫn backend xử lý
						type : 'PUT',
						contentType : 'application/json',
						data : JSON.stringify(data),
						success : function(response) {
							alert("Cập nhật thông tin thành công");
							window.location.href = response;
						},
						error : function(xhr, status, error) {
							if (xhr.status === 401 || xhr.status === 403) {
								window.location.href = xhr.responseText;
							} else if (xhr.status === 400) {
								alert(xhr.responseText);
							}
						}
					});
				})
			} else {
				$.ajax({
					url : '/account/detail/',
					type : 'GET',
					success : function(data) {
						$("#name").val(data.fullName);
						$("#employee-id").val(data.userId);
						$("#email").val(data.email);
						$("#phone").val(data.phone);
						$("#role").val(data.role);
						$("#created-date").val(data.createdAt);
						$("#last-updated").val(data.updatedAt);
						$("#role").addClass("readonly-select");
					},
					error : function(xhr) {
						if (xhr.status === 401 || xhr.status === 403) {
							window.location.href = xhr.responseText;
						} else if (xhr.status === 400) {
							alert(xhr.responseText);
						}
					}
				});
				$("#update").on("click", function() {
					// Lấy dữ liệu từ các trường
					let data = {
						fullName : $('#name').val(),
						phone : $('#phone').val(),
						email : $('#email').val(),
						role : $('#role').val()
					};
					// Gửi AJAX
					$.ajax({
						url : '/account/update/', // Đường dẫn backend xử lý
						type : 'PUT',
						contentType : 'application/json',
						data : JSON.stringify(data),
						success : function(response) {
							alert("Cập nhật thông tin thành công");
							window.location.href = "account_details.html";
						},
						error : function(xhr, status, error) {
							if (xhr.status === 401) {
								alert("Bạn chưa đăng nhập");
								window.location.href = xhr.responseText;
							} else if (xhr.status === 400) {
								alert(xhr.responseText);
							}
						}
					});
				})
			}
		});
	</script>
</body>
</html>